\documentclass[xetex,mathserif,serif]{beamer}
\usepackage{polyglossia}
\setdefaultlanguage[babelshorthands=true]{russian}
\usepackage{minted}
\usepackage{tabu}
\usepackage{moresize}

\useoutertheme{infolines}

\usepackage{fontspec}
\setmainfont{FreeSans}
\newfontfamily{\russianfonttt}{FreeSans}

\definecolor{links}{HTML}{2A1B81}
\hypersetup{colorlinks,linkcolor=,urlcolor=links}

\setbeamertemplate{blocks}[rounded][shadow=false]

\setbeamercolor*{block title alerted}{fg=red!50!black,bg=red!20}
\setbeamercolor*{block body alerted}{fg=black,bg=red!10}

\tabulinesep=1.2mm

\title{Работа с сетью}
\subtitle{Высокий уровень}
\author[Юрий Литвинов]{Юрий Литвинов\\\small{\textcolor{gray}{yurii.litvinov@gmail.com}}}
\date{28.09.2018г}

\newcommand{\attribution}[1] {
\vspace{-5mm}\begin{flushright}\begin{scriptsize}\textcolor{gray}{\textcopyright\, #1}\end{scriptsize}\end{flushright}
}

\begin{document}

	\frame{\titlepage}

	\section{Теоретическое введение}

	\begin{frame}
		\frametitle{Протоколы прикладного уровня}
	\end{frame}

	\section{Как это работает в .NET}

	\begin{frame}[fragile]
		\frametitle{Как это работает в .NET}
		\framesubtitle{HttpClient}
		\begin{minted}{csharp}
class Program
{
    private static async Task Main(string[] args)
    {
        var httpClient = new HttpClient();

        var response = await httpClient.GetAsync("http://hwproj.me/");
        if (response.IsSuccessStatusCode)
        {
            var content = await response.Content.ReadAsStringAsync();
            Console.WriteLine(content);
        }
    }
}
		\end{minted}
	\end{frame}

	\begin{frame}[fragile]
		\frametitle{Exponential backoff}
		\begin{small}
			\begin{minted}{csharp}
static async Task<string> DownloadStringWithRetries(string uri)
{
    using (var client = new HttpClient())
    {
        var delay = TimeSpan.FromSeconds(1);
        for (int i = 0; i != 3; ++i)
        {
            try
            {
                return await client.GetStringAsync(uri);
            }
            catch
            {
            }
            await Task.Delay(delay);
            delay *= 2;
        }
        // Попробуем последний раз, дав ошибке распространиться
        return await client.GetStringAsync(uri);
    }
}
			\end{minted}
		\end{small}
	\end{frame}

	\section{REST}

	\begin{frame}
		\frametitle{Representational State Transfer}
		\framesubtitle{REST}
	\end{frame}

\end{document}
