# Соглашение о стиле кодирования на C

Программы обычно пишутся прежде всего для человека, а уж потом для компьютера. Поэтому на читабельность программы и на то, чтобы она была понятной, надо обращать особое внимание. Неправильная, но понятная программа лучше правильной, но непонятной — в первой легко найти ошибку и поправить, а во вторую сложно вносить изменения. Поэтому существуют стили кодирования — некие соглашения между программистами, если не следовать которым, можно быть непонятым. Например, если написать:

```
for (int i = 0; i < 10; ++i);
    printf("Ъ");
```

все подумают, что Ъ будет напечатан 10 раз, а на самом деле — 1.

Обязательные к исполнению правила:

1. Программа должна собираться без предупреждений компилятора
1. Вложенные операторы должны выделяться отступом, операторы одного уровня вложенности должны быть на одном уровне отступов. Отступы делаются в 4 пробела.
1. Используйте пустые строки, чтобы выделять логически связные куски кода. Не ставьте две пустые строки подряд.
1. Не должно быть раскопированного кода. Выделяйте общие куски в функции.
1. Не следует писать несколько операторов на одной строке, например,
    ```
    if (k < 0) fail = true;
    ```
    следует писать как

    ```
    if (k < 0) 
    {
        fail = true;
    }
    ```
1. По возможности сужайте области видимости переменных, множества возможных значений (например, не стоит использовать переменную типа int в качестве логической переменной), набор допустимых операций и т.д. (например, пишите const везде, где только можно). Тогда если что-то пошло не так, вы сможете узнать об этом уже на этапе компиляции.
1. Не используйте глобальные переменные.
1. Не используйте goto. Вообще, старайтесь, чтобы поток выполнения программы был прост и понятен.
1. Одна сущность должна отвечать за одно действие и играть одну роль по всей программе. Одна функция должна делать что-то одно, если функция делает что-то и что-то ещё, её надо разбить на две. Одну и ту же переменную нельзя использовать в двух различных ролях.
1. Не пишите функций размером больше экрана, разбивайте их на мелкие функции (здесь допустимы исключения).
1. Все объявляемые переменные должны быть сразу же проинициализированы (при объявлении). Включая массивы и строки.
1. Выбирайте подходящие имена для переменных и функций. Называйте переменные, константы, функции и файлы со строчной буквы, а свои типы (в т.ч. классы) с заглавной. Если в имени переменной, функции или файла содержится несколько слов, то все, кроме первого, должны начинаться с заглавной буквы (без каких-либо символов подчеркивания). Это называется camelCase. Не сокращайте имена. Например:
    ```
    struct ListNode {
        int value;
        ListNode* next;
    };

    int getNextValue();
    void printoutList();
    ```
1. Не используйте "магические константы" (опять же, не следует увлекаться). Неправильно:
    ```
    for (i = 0; i < 10; ++i)
    ```
    Правильно:
    ```
    int const dimension = 10;  
    ... 
    for (i = 0; i < dimension; ++i)
    ```
1. Не используйте макропроцессор (кроме `#include` или `#define` в случаях, когда const использовать не получится)
1. Не используйте в своих программах файл `conio.h` и другие системно-зависимые/нестандартные расширения.
1. Выделяйте пробелами арифметические операции, оператор присваивания и т.д.
1. Не отделяйте пробелами скобки. Например, не "`assert (false)`" или "`assert( false )`", а "`assert(false)`".
1. Ставьте пробел после ключевого слова: между `if` и `(`, for и `(` и т.д. Например, правильно оформленный for:
    ```
    for (int i = 0; i < maxN; ++i) 
    {
        printf("Hello, world!\n");
    }
    ```
1. Операторы доступа к полям структур `->` и `.` пробелами не выделяются
1. Предложения case в операторе switch должны оформляться следующим образом:
    ```
    case '2': 
    {
        ...
        break;
    }
    ```
1. Отделяйте пробелами "`#include`" и '`<`' (или '`"`'), например, `#include <stdio.h>`
1. Пишите фигурные скобки в стиле BSD (стиле Алмена), с поправкой, что один оператор в блоке также выделяется скобками.
1. Функции-предикаты (булевы функции) следует именовать следующим образом: `[глагол][предикат]`, где "глагол" — глагол бытия (to be) или обладания (to have) в соответствующей форме, а "предикат" — проверяемое свойство. Исключение составляют широкораспространённые вопросы, подразумевающие ответ "да"/"нет", которые с is/has не используются. Например:
    ```
    bool isPrime(int n);
    bool hasColor();
    bool exists(int n);
    ```
1. При вызове функций-предикатов запрещается сравнивать результат с логическими константами. `if (isPrime(n) == true)` — плохой код. Сравнивать логические переменные с логическими константами столь же бессмысленно.
1. Не используйте транслит, пишите все по-английски (может, с помощью программы-переводчика). Например, `vstavka()` — неудачное название для функции, реализующей алгоритм сортировки вставками.
1. Если вы выделяете системные ресурсы (память, файловые дескрипторы, etc), то вы обязательно должны их освободить, как только в них отпадает нужда. Пример с файлами: 
    ```
    FILE *f = fopen("file.txt", "r"); 
    <использование f> 
    fclose(f);
    ```
    или с памятью:
    ```
    int *a = (10, sizeof(int)); 
    <использование a> 
    free(a);
    ```
1. Для обозначения нулевого указателя используйте не `0`, а `NULL`.
1. Каждый вывод данных на экран должен сопровождаться сообщением с пояснением того, что именно выводится.
1. Каждый ввод пользовательских данных должен сопровождаться приглашением к вводу, объясняющим пользователю, ввод данных какого рода и в каком объеме от него ожидается.